# MLOps Project Configuration
project:
  name: "torob-rag-system"
  phase: 1
  seed: 42

data:
  raw_path: "Data/"
  processed_path: "Data/processed/"
  tables:
    - "base_products"
    - "members"
    - "searches"
    - "base_views"
    - "final_clicks"
    - "shops"
    - "categories"
    - "brands"
    - "cities"

eda:
  output_dir: "../reports/eda/"
  generate_profile: true
  plot_distributions: true
  
cleaning:
  placeholder_tokens: ['none', 'null', 'nan', 'n/a', 'na', '-', '--', 'unknown', '?']
  price_min: 1000  # Minimum valid price (1,000 Toman)
  price_max: 1000000000000  # Maximum valid price (1 Trillion Toman)
  remove_zero_prices: true
  missing_threshold: 0.3  # Drop columns with >30% missing
  remove_duplicates: true

feature_engineering:
  sample_size: 5000  # Set to null for full dataset processing
  
  text:
    # Compact sentence embedding model (English-focused, no prefixes needed)
    # Note: For better Persian support, consider using multilingual-e5-base
    model_name: "sentence-transformers/all-MiniLM-L12-v2"
    max_length: 128
    batch_size: 64  # Increased from 32 for better GPU utilization
  
  image:
    model_name: "openai/clip-vit-base-patch32"
    image_size: 224
    batch_size: 32  # Increased from 16 for better GPU utilization
    cache_dir: "../outputs/image_cache/"
    download_timeout: 15  # seconds
  
  multimodal:
    fusion_method: "concatenation"  # Options: concatenation, attention, projection

outputs:
  embeddings_dir: "../outputs/embeddings/"
  models_dir: "../outputs/models/"
  image_cache_dir: "../outputs/image_cache/"

vector_db:
  type: "chromadb"
  persist_directory: "../outputs/vector_db/"
  collections:
    text: "products_text"
    image: "products_image"
    multimodal: "products_multimodal"
  distance_metric: "cosine"

retrieval:
  top_k: 10
  rerank: true
  
evaluation:
  metrics:
    - "ndcg@10"
    - "recall@10"
    - "mrr"
  test_size: 0.2
  
experiment_tracking:
  use_mlflow: true
  tracking_uri: "../mlruns/"
  experiment_name: "torob-rag-phase1"

# Global random seed for reproducibility
random_seed: 42
